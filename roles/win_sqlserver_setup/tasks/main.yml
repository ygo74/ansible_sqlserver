- name: Check Mandatory variables
  fail:
    msg: '{{ item }} is mandatory'
  when: item is undefined
  with_items:
  - 'win_sqlserver_setup_iso_path'
  - 'win_sqlserver_setup_engine_service_account'
  - 'win_sqlserver_setup_agent_service_account'
  - 'win_sqlserver_setup_system_admins'
  tags:
  - always


- name: Import tasks for sql server installation engine qnd management studio
  import_tasks: 10-install.yml
  when: win_sqlserver_setup_action == win_sqlserver_setup_action_install
  tags:
  - install_from_scratch

- name: Import tasks for configuration to sql server engine
  import_tasks: 20-configure.yml
  when: win_sqlserver_setup_action == win_sqlserver_setup_action_configure
  tags:
  - configure
